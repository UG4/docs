<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ug4: Introduction to ug4&#39;s Domain class</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ug4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('page_u_g4_cpp_introduction__domain.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Introduction to ug4's Domain class </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="classug_1_1_domain.html">ug::Domain</a> class holds a grid (<a class="el" href="classug_1_1_multi_grid.html">ug::MultiGrid</a>), which stores the elements on which discretization is performed, a SubsetHandler (<a class="el" href="namespaceug.html#a91b252690bb2794c8774c09bea4ea26b">ug::MGSubsetHandler</a>), which stores a partition of the grid into different subsets, and holds a position attachment, which provides coordinates in the vertices of the grid. The domain class is defined in <a class="el" href="domain_8h.html">ugbase/lib_disc/domain.h</a></p>
<p><a class="el" href="page_l_g_overview.html">libGrid - Overview</a> gives more information on the <a class="el" href="classug_1_1_multi_grid.html">ug::MultiGrid</a> and related classes.</p>
<p>The domain class is actually a template class, depending on the space-dimension and the grid type. While the grid-type for now is fixed to <a class="el" href="classug_1_1_multi_grid.html">ug::MultiGrid</a> (supports adaptivity, mixed element types, parallelization, ...), the dimension is used to define the number of coordinates, that the grid's position attachment carries.</p>
<p>A <em>Domain</em> defines a couple of types:</p><ul>
<li><em>grid_type:</em> The type of grid on which the domain operates. For now <a class="el" href="classug_1_1_multi_grid.html">ug::MultiGrid</a>.</li>
<li><em>subset_handler_type:</em> The type of the subset handler which partitions the grid. Currently <a class="el" href="namespaceug.html#a91b252690bb2794c8774c09bea4ea26b">ug::MGSubsetHandler</a>.</li>
<li><em>position_type:</em> The class which represents vertex-coordinates. This is ug::MathVector&lt;dim&gt;.</li>
<li><em>position_attachment_type:</em> The attachment, which associates the coordinates with the vertices of the grid. This is ug::Attachment&lt;position_type&gt; (== Attachment&lt;<a class="el" href="classug_1_1_math_vector.html">MathVector&lt;dim&gt;</a> &gt;)</li>
<li><em>position_accessor_type:</em> The type of the attachment accessor, with which one can access the coordinates of vertices. This is ug::Grid::VertexAttachmentAccessor&lt;position_attachment_type&gt;.</li>
</ul>
<p>Furthermore the <em>Domain</em> defines the constant <em>dim</em>, which simply equals the dimension template argument of the domain.</p>
<p><br  />
 Methods which operate on a domain are template methods, most of which simply take a template parameter TDomain. In the following we'll develop a simple method <em>CalculateDomainCenter</em> to demonstrate how the domain class can be used. Note that center in this example simply means the average of all vertex positions:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceug.html">ug</a>{</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> TDomain&gt;</div>
<div class="line"><span class="keyword">typename</span> TDomain::position_type</div>
<div class="line">CalculateDomainCenter(TDomain&amp; dom)</div>
<div class="line">{</div>
<div class="line"><span class="comment">//  ...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">}<span class="comment">// end of namespace</span></div>
<div class="ttc" id="anamespaceug_html"><div class="ttname"><a href="namespaceug.html">ug</a></div><div class="ttdoc">the ug namespace</div></div>
</div><!-- fragment --><p>The method returns a ug::MathVector&lt;1&gt;, ug::MathVector&lt;2&gt;, or ug::MathVector&lt;3&gt; (<a class="el" href="group__vectors.html#ga854e6e8de32edbebb662479148b4a8fa" title="a 1d vector">ug::vector1</a>, <a class="el" href="group__vectors.html#ga0a32414068406bfb5c0742cccf8bb6f1" title="a 2d vector">ug::vector2</a>, or <a class="el" href="group__vectors.html#ga894cdb8af74f7a563a94fb49c220fdcd" title="a 3d vector">ug::vector3</a>) depending on the domains dimension.</p>
<p>We'll iterate over all vertices of the grid and average their coordinates. For this we'll first retrieve the domain's grid and the domain's position accessor. We'll then access the vertices in the grid through iterators and sum their corrdinates. When this is done, we'll divide the sum through the number of grid-vertices to retrieve the center.</p>
<div class="fragment"><div class="line"><span class="keyword">typename</span> TDomain::grid_type&amp; grid = dom.grid();</div>
<div class="line"><span class="keyword">typename</span> TDomain::position_accessor_type&amp; aaPos = dom.position_accessor();</div>
<div class="line"><span class="keyword">typename</span> TDomain::position_type center;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__vectors.html#ga37c542a5b243f331a1d8bb74d331ba4e">VecSet</a>(center, 0);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(grid.num&lt;Vertex&gt;() == 0)</div>
<div class="line">  <span class="keywordflow">return</span> center;</div>
<div class="line">  </div>
<div class="line"><span class="keywordflow">for</span>(<a class="code" href="namespaceug.html#a1903407556f1e2b80c006ae920ea8e0e">VertexIterator</a> iter = grid.begin&lt;Vertex&gt;();</div>
<div class="line">  iter != grid.end&lt;Vertex&gt;(); ++iter)</div>
<div class="line">{</div>
<div class="line">  Vertex* vrt = *iter;</div>
<div class="line">  <a class="code" href="group__vectors.html#ga945c247d94409091fd35fdbbcb5032c2">VecAdd</a>(center, center, aaPos[vrt]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__vectors.html#gaa0cd3e6bb61c8e341541f8cf3065ec6d">VecScale</a>(center, center, 1. / (<a class="code" href="group__ugbase__common.html#gaf349a0d1e8189254086eb3267fd4f460">number</a>)grid.num&lt;Vertex&gt;());</div>
<div class="line"><span class="keywordflow">return</span> center;</div>
<div class="ttc" id="agroup__ugbase__common_html_gaf349a0d1e8189254086eb3267fd4f460"><div class="ttname"><a href="group__ugbase__common.html#gaf349a0d1e8189254086eb3267fd4f460">number</a></div><div class="ttdeci">double number</div><div class="ttdef"><b>Definition:</b> types.h:124</div></div>
<div class="ttc" id="agroup__vectors_html_ga37c542a5b243f331a1d8bb74d331ba4e"><div class="ttname"><a href="group__vectors.html#ga37c542a5b243f331a1d8bb74d331ba4e">ug::VecSet</a></div><div class="ttdeci">void VecSet(vector_t &amp;vInOut, typename vector_t::value_type s)</div><div class="ttdoc">Set each vector component to scalar (componentwise)</div><div class="ttdef"><b>Definition:</b> math_vector_functions_common_impl.hpp:539</div></div>
<div class="ttc" id="agroup__vectors_html_ga945c247d94409091fd35fdbbcb5032c2"><div class="ttname"><a href="group__vectors.html#ga945c247d94409091fd35fdbbcb5032c2">ug::VecAdd</a></div><div class="ttdeci">void VecAdd(vector_t &amp;vOut, const vector_t &amp;v1, const vector_t &amp;v2)</div><div class="ttdoc">adds two MathVector&lt;N&gt;s and stores the result in a third one</div><div class="ttdef"><b>Definition:</b> math_vector_functions_common_impl.hpp:185</div></div>
<div class="ttc" id="agroup__vectors_html_gaa0cd3e6bb61c8e341541f8cf3065ec6d"><div class="ttname"><a href="group__vectors.html#gaa0cd3e6bb61c8e341541f8cf3065ec6d">ug::VecScale</a></div><div class="ttdeci">void VecScale(vector_t &amp;vOut, const vector_t &amp;v, typename vector_t::value_type s)</div><div class="ttdoc">scales a MathVector&lt;N&gt;</div><div class="ttdef"><b>Definition:</b> math_vector_functions_common_impl.hpp:252</div></div>
<div class="ttc" id="anamespaceug_html_a1903407556f1e2b80c006ae920ea8e0e"><div class="ttname"><a href="namespaceug.html#a1903407556f1e2b80c006ae920ea8e0e">ug::VertexIterator</a></div><div class="ttdeci">ElementStorage&lt; Vertex &gt;::SectionContainer::iterator VertexIterator</div><div class="ttdoc">This Iterator will be used as base-class for iterators of specialized geometric objects.</div><div class="ttdef"><b>Definition:</b> grid_base_object_traits.h:73</div></div>
</div><!-- fragment --><p><a class="el" href="group__vectors.html#ga37c542a5b243f331a1d8bb74d331ba4e" title="Set each vector component to scalar (componentwise)">ug::VecSet</a>, <a class="el" href="group__vectors.html#ga945c247d94409091fd35fdbbcb5032c2" title="adds two MathVector&lt;N&gt;s and stores the result in a third one">ug::VecAdd</a> and <a class="el" href="group__vectors.html#gaa0cd3e6bb61c8e341541f8cf3065ec6d" title="scales a MathVector&lt;N&gt;">ug::VecScale</a> are thereby methods to perform basic vec-math operations. Their first argument is always the target-value, where the result shall be stored. They are defined in <a class="el" href="math__vector__functions_8h.html">ugbase/common/math/math_vector_matrix/math_vector_functions.h</a></p>
<p>aaPos[vrt] returns a TDomain::position_type (vector1, vector2 or vector3)</p>
<p>number is ug4's floating point type and either float (single precision) or double (double precision). The floating-point type can be set through a cmake parameter. The default is double precision.</p>
<p><a class="el" href="page_l_g_overview.html">libGrid - Overview</a> gives more information on how to access elements of grids and on the different element types them selves. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ug4 - Documentation</a></li><li class="navelem"><a class="el" href="page_u_g4_development.html">Development</a></li><li class="navelem"><a class="el" href="page_u_g4_cpp_introduction.html">Introduction for C++ Programmers</a></li>
    <li class="footer">Generated on Mon Mar 20 2023 01:07:56 for ug4 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
