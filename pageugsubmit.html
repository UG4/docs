<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ug4: ugsubmit - Job Scheduling on Clusters</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ug4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('pageugsubmit.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ugsubmit - Job Scheduling on Clusters </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#secIntroduction">Introduction</a></li>
<li class="level1"><a href="#secOtherScripts">Other Scripts, Improvements</a></li>
<li class="level1"><a href="#secugsubmit">ugsubmit</a></li>
<li class="level1"><a href="#secuginfo">uginfo</a></li>
<li class="level1"><a href="#secugcancel">ugcancel</a></li>
</ul>
</div>
<div class="textblock"><hr  />
 <h1><a class="anchor" id="secIntroduction"></a>
Introduction</h1>
<hr  />
<p>To use the scripts described here, you have to set up ug4's <a class="el" href="page_bash_tools.html">BASH Tools</a> .</p>
<p><a class="el" href="pageugsubmit.html#secugsubmit">ugsubmit</a> , <a class="el" href="pageugsubmit.html#secuginfo">uginfo</a> and <a class="el" href="pageugsubmit.html#secugcancel">ugcancel</a> are scripts to unify the access to job schedulers over different clusters.<br  />
 Supported clusters are <code> NecNehalem, Hermit, Jugene, Juqueen, mpi, cekon, moab </code>.<br  />
</p>
<p>For this you can set some environment variables (here for bash) </p><pre class="fragment">export UGSUBMIT_TYPE=Hermit
export UGSUBMIT_EMAIL=mail@you.de
</pre><p> Alternatively, you can use the arguments <code>-cluster=Hermit</code> and <code>-email=mail@you.de</code> .<br  />
 Now you can run a job like this:</p>
<pre class="fragment">Hermit [~/ug4/bin] ugsubmit 64 -mail-all -walltime 00:30:00 --- ./ugshell -ex laplace.lua -numPreRefs 6 -numRefs 9
</pre><p>and you get this output </p><pre class="fragment">ugsubmit 0.1. (c) Goethe-Center for Scientific Computing 2012

Using qsub on Hermit/Cray XE6
qsub -V ./bin/job.64.2012-03-07.10:27:34/job.sh
Submitting batch job to queue ...
Recieved PBSid: 
42851.sdb
</pre><p>we can look if it really runs with uginfo:</p>
<pre class="fragment">Hermit [~/ug4/bin] uginfo
uginfo 0.1. (c) Goethe-Center for Scientific Computing 2012
Using Hermit
Job id                    Name             User            Time Use S Queue
42851.sdb                  ...3-07.10:27:34 rupp            00:00:01 C multi          
42853.sdb                  ...3-07.10:29:00 rupp                   0 R multi          
42854.sdb                  ...3-07.10:29:13 rupp                   0 R single 
</pre><p>You can also write testscripts using a bunch of ugsubmits, and use them on a wide range of clusters like this: </p><pre class="fragment">#!/bin/bash
ugsubmit 1  --- ./ugshell -ex laplace.lua -numRefs 6
ugsubmit 16 --- ./ugshell -ex laplace.lua -numPreRefs 4 -numRefs 8
ugsubmit 64 --- ./ugshell -ex laplace.lua -numPreRefs 5 -numRefs 9
ugsubmit 256  -mail-end --- ./ugshell -ex laplace.lua -numPreRefs 6 -numRefs 10
ugsubmit 1024 -mail-end --- ./ugshell -ex laplace.lua -numPreRefs 7 -numRefs 11
</pre><dl class="section note"><dt>Note</dt><dd>The Default Walltime is 00:10:00, thats 10 minutes. After that, your job will be canceled.</dd></dl>
<hr  />
 <h1><a class="anchor" id="secOtherScripts"></a>
Other Scripts, Improvements</h1>
<hr  />
<p>If you have other scripts which start job schedulers, please mail them to me, and tell me how to make ugsubmit better. You have an option which you can't live without? Perhaps you can include it into ugsubmit, then everyone can benefit. Also if you come to new clusters currently not supported in ugsubmit, we can incorporate this into ugsubmit. Change it in the repro or write an email to <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ti'+'n.r'+'up'+'p@g'+'cs'+'c.u'+'ni'+'-fr'+'an'+'kfu'+'rt'+'.de'; return false;">martin.rupp@gcsc.uni-frankfurt.de</a> .</p>
<hr  />
 <h1><a class="anchor" id="secugsubmit"></a>
ugsubmit</h1>
<hr  />
<p>ugsubmit can be located in <code> /ug4/scripts/shell/ugsubmit </code>. To make it available you have to <code>source YOUR_UG4_PATH/ug4/scripts/shell/ugpath</code>.</p>
<pre class="fragment">ugsubmit &lt;npe&gt; [optional Parameters] --- &lt;binary&gt; &lt;arg1&gt; &lt;arg2&gt; ...
</pre><ul>
<li>&lt;npe&gt; : number of processes</li>
<li>&lt;binary&gt; : the binary</li>
<li><p class="startli">&lt;args&gt; : arguments for execution of binary</p>
<p class="startli">optional Parameters are:</p>
</li>
<li>-test : do not actually execute, only write scripts (also sets -verbose)</li>
<li>-nppn &lt;nppn&gt; : number of processes per node (optional, default maximum nr. on cluster)</li>
<li>-cluster &lt;type&gt; : cluster to use. see below (or use env. variable UGSUBMIT_TYPE)</li>
<li>-name &lt;jobname&gt; : a jobname to be used (optional, default "job")</li>
<li>-walltime &lt;hh:mm:ss&gt; : max walltime for job to run (optional; default is 00:10:00)</li>
<li>-email &lt;emailadress&gt; : emailadress. you can also use the environment variable UGSUBMIT_EMAIL.</li>
<li>-mail-start : mail when job starts</li>
<li>-mail-end : mail when job ends</li>
<li>-mail-error : mail on error</li>
<li>-mail-all :</li>
<li>-verbose : enable verbose mode</li>
<li>-tail : display the output (as tail -f. job runs even if you hit Ctrl-C)</li>
<li>-i : interactive (not fully supported)</li>
<li><p class="startli">-dir : directory to use</p>
<p class="startli">Supported Cluster Types: NecNehalem, Hermit, Jugene, mpi, cekon, moab.</p>
<p class="startli">Jugene Parameters</p>
</li>
<li>-Jugene-mode : VN, DUAL or SMP. Default VN</li>
<li>-Jugene-mapfile : Mapfile. Default TXYZ</li>
<li><p class="startli">-Jugene-verbose : Verbose Level. Default 2</p>
<p class="startli">Hermit Parameters</p>
</li>
<li><p class="startli">-Hermit-workspace : Use the Hermit Workspace mechanism for I/O. <a href="https://wickie.hlrs.de/platforms/index.php/Workspace_mechanism">https://wickie.hlrs.de/platforms/index.php/Workspace_mechanism</a></p>
<p class="startli">descr: The script creates a new folder relative to the current path with the name '&lt;jobname&gt;.&lt;npe&gt;.(date)' (where &lt;npe&gt; is the number of processes. In this new directory a file named 'info.txt' is created, to identify the job. Then, depending on the selected cluster type, a shell script is created and submitted to the job scheduling system. ugsubmit also sets a symbolic link lastRun to the newly created directory</p>
<p class="startli">exported environment variables:</p><ul>
<li>UGS_JOBNAME : job name</li>
<li>UGS_OUTDIR : output directory</li>
<li>UGS_NP : see &lt;npe&gt;</li>
<li>UGS_NPPN : see -nppn</li>
<li>UGS_MYDIR : the directory ugsubmit is started from</li>
</ul>
</li>
</ul>
<hr  />
 <h1><a class="anchor" id="secuginfo"></a>
uginfo</h1>
<hr  />
<p> uginfo displays job information of the current user on the cluster.</p>
<hr  />
 <h1><a class="anchor" id="secugcancel"></a>
ugcancel</h1>
<p>ugcancel cancels a job. use <a class="el" href="pageugsubmit.html#secuginfo">uginfo</a> to get a job id. </p><hr  />
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ug4 - Documentation</a></li><li class="navelem"><a class="el" href="page_u_g4_usage.html">Usage</a></li><li class="navelem"><a class="el" href="page_u_g4_parallel_usage.html">Parallel Usage</a></li>
    <li class="footer">Generated on Mon Mar 25 2024 00:56:21 for ug4 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
