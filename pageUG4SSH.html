<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ug4: SSH</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ug4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>ug4</span></a></li>
      <li><a href="usergroup0.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('pageUG4SSH.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SSH </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#secSSHKeys">Exchanging SSH Keys</a></li>
<li class="level1"><a href="#secSSHControlmaster">SSH Controlmaster</a></li>
<li class="level1"><a href="#secSSHHopping">SSH Hopping</a></li>
<li class="level1"><a href="#secSSHFS">FUSE/SSHFS</a></li>
<li class="level1"><a href="#secSSH_Eclipse">SSHFS + Eclipse</a></li>
</ul>
</div>
<div class="textblock"><hr/>
 <h1><a class="anchor" id="secSSHKeys"></a>
Exchanging SSH Keys</h1>
<p>You can exchange RSA keys so you don't have to type in your password every time you connect.</p>
<ul>
<li>
generate local ssh key (empty password): <pre class="fragment">ssh-keygen -b 2048 -t rsa</pre> </li>
<li>
copy local ssh key to cluster.de (user mrupp): <pre class="fragment">cat .ssh/id_rsa.pub | ssh mrupp@cluster.de 'umask 077; cat &gt;&gt; .ssh/authorized_keys'</pre>  </li>
</ul>
<hr/>
 <h1><a class="anchor" id="secSSHControlmaster"></a>
SSH Controlmaster</h1>
<p>Some systems don't support exchange of RSA keys, and some might find it insecure. There's another possible way so you only have to enter your password once for each session. Create the directory <code>~/.ssh/controlpath</code> and add the following lines to your <code>~/.ssh/config</code> file: </p><pre class="fragment">host *
    controlmaster auto
    controlpath ~/.ssh/controlpath/ssh-%r@%h:%p
</pre><p> You might have to replace ~ with the complete path to your home directory. With this, a ssh connection is "reused" by all later connections. So when you always keep one connection open, you don't have to reenter your password for new ssh terminals or scp transfers. </p><dl class="section note"><dt>Note</dt><dd>Your first ssh connection has to include a -X to use X11. </dd>
<dd>
When something is going wrong, you might have to kill all ssh/scp/sshfs processes to restart.</dd></dl>
<hr/>
 <h1><a class="anchor" id="secSSHHopping"></a>
SSH Hopping</h1>
<p>Many supercomputers are only accessible by some fixed IP you specify. Since at home we do not have a fixed IP, you have to use SSH hopping. Say speedo's IP (<code>speedo.gcsc.uni-frankfurt.de</code>) is specified as the connecting IP, and your account is <code>mrupp@speedo.gcsc.uni-frankfurt.de</code>, and <code>rupp@supercomputer.de</code> is the supercomputer account. Then you can connect to <code>speedo</code> via ssh, and from there further with ssh to the supercomputer: </p><pre class="fragment">ssh mrupp@speedo.gcsc.uni-frankfurt.de
ssh rupp@supercomputer.de
</pre><p>There are two ways to speed this up </p><ul>
<li>
hopping in one line: <pre class="fragment">ssh -t mrupp@speedo.gcsc.uni-frankfurt.de ssh rupp@supercomputer.de</pre>  </li>
<li>
automatic hopping: Add the following lines to the file <code>~/.ssh/config</code> <pre class="fragment">Host supercomputer.de
User rupp
ForwardAgent yes
ProxyCommand ssh mrupp@speedo.gcsc.uni-frankfurt.de nc %h %p</pre> now you'll only have to enter <pre class="fragment">ssh supercomputer.de</pre> and enter the passwords.  </li>
</ul>
<hr/>
 <h1><a class="anchor" id="secSSHFS"></a>
FUSE/SSHFS</h1>
<p>Manipulating files on remote system can be really tedious. Fortunately, with SSHFS you can mount filesystems over ssh into your computer. It's like having a supercomputer as a USB stick. For that</p>
<ul>
<li>
MacOS &gt;= 10.7: download &amp; install <a href="http://github.com/osxfuse/osxfuse/downloads">OSX Fuse</a> and then <a href="http://github.com/osxfuse/sshfs/downloads">SSHFS</a>.  </li>
<li>
<p class="startli">MacOS &lt;= 10.6: download &amp; install <a href="http://code.google.com/p/macfuse/downloads/list">macfuse</a>.<br />
 install sshfs: </p><pre class="fragment">cd ~/Downloads/
svn co http://macfuse.googlecode.com/svn/trunk/filesystems/sshfs/binary sshfs-binaries
cd sshfs-binaries/
sudo cpsshfs-static-leopard /usr/bin/sshfs</pre><p> For tiger, use <code>sshfs-static-tiger</code>. </p>
<p class="endli"></p>
</li>
</ul>
<p>Now FUSE/SSHFS is installed. Now we'll mount the home directory of <code>mrupp@supercomputer.de</code> to <code>~/sshvolumes/mrupp@supercomputer</code>. </p><pre class="fragment">mkdir ~/sshvolumes
mkdir ~/sshvolumes/mrupp@supercomputer
sshfs mrupp@supercomputer.de: ~/sshvolumes/mrupp@supercomputer -o auto_cache,reconnect,volname=mrupp@supercomputer
</pre><p>unmounting is done via </p><pre class="fragment">umount ~/sshvolumes/mrupp@supercomputer
</pre><dl class="section note"><dt>Note</dt><dd>SSHFS also works together with <a class="el" href="pageUG4SSH.html#secSSHHopping">SSH Hopping</a> and <a class="el" href="pageUG4SSH.html#secSSHKeys">Exchanging SSH Keys</a>. For Windows, try <a href="http://dokan-dev.net/en/download/">Dokan library</a>.</dd></dl>
<hr/>
 <h1><a class="anchor" id="secSSH_Eclipse"></a>
SSHFS + Eclipse</h1>
<p>Note for <em>Eclipse</em> users: You can also import a project on your mounted filesystem. For that, create a C/C++ project and as base directory you use the <b>ug4</b> base directory. You'll then even get SVN info. You can also build on the remote server, but don't use the normal build command: Right Mouse click on the project -&gt; Properties -&gt; C/C++ Build. Disable "use default build command", then enter at "Build Command" something like </p><pre class="fragment">ssh mrupp@supercomputer.de "cd ug4; cd release; make -j4"
</pre><p> (You can do the same for run/debug settings).</p>
<p>An improved version is </p><pre class="fragment">/bin/bash ${ProjDirPath}/scripts/shell/sshfsmake mrupp@supercomputer.de ug4/debug /Users/mrupp/ug4/debug /Volumes/mrupp@supercomputer/ug4/debug  -j4 -k
</pre><p> See <code>ug4/scripts/shell/sshfsmake</code> for details (basically you are calling <code>ssh mrupp@supercomputer.de "cd ug4/debug; make -j4"</code>, and then substituting remote paths with local ones, so <em>Eclipse</em> knows which files contain errors).</p>
<p>Since SSHFS is not as fast as your local drive, you might want to disable the most bandwith consuming things (at Project Preferences):</p><ul>
<li>C/C++ Build -&gt; Discovery Options: Disable "Automated discovery of paths and symbols"</li>
<li>C/C++ Build -&gt; Logging: Disable Logging</li>
<li>C/C++ General -&gt; Indexer -&gt; Disable Indexer</li>
</ul>
<p>If that does not help, consider <em>Eclipse</em> -&gt; Preferences -&gt; Team -&gt; SVN -&gt; Performance, altough deactivating "deep outgoing state" is not recommended.<br />
 Remember that <em>Eclipse</em> does not know that the files are not on your local machine, so when you are doing big SVN checkouts in <em>Eclipse</em>, all data is going to your computer, and then to the remote machine. Consider using the remote shell for those tasks.</p>
<p>See also <a class="el" href="pageUG4SVN.html#secSSH_outdatedSVN">Incompatible SVN Versions</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ug4 - Documentation</a></li><li class="navelem"><a class="el" href="pageUG4Development.html">Development</a></li><li class="navelem"><a class="el" href="pageUG4DevTipsGuides.html">Tips and Guidelines</a></li>
    <li class="footer">Generated on Wed Jan 13 2016 12:42:54 for ug4 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
